
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com\0xor1\gameseed\src\server\src\api\helper.go (100.0%)</option>
				
				<option value="file1">github.com\0xor1\gameseed\src\server\src\api\route.go (100.0%)</option>
				
				<option value="file2">github.com\0xor1\gameseed\src\server\src\game\game.go (100.0%)</option>
				
				<option value="file3">github.com\0xor1\gameseed\src\server\src\session\session.go (100.0%)</option>
				
				<option value="file4">github.com\0xor1\gameseed\src\server\src\sys\sys.go (100.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" >package api

import(
        `errors`
        `net/http`
        js `encoding/json`
        `github.com/0xor1/gameseed/src/server/src/sys`
)

const(
        _GAME_ID         = `gameId`
        _VERSION        = `version`
        _ROW                = `row`
        _COL                = `col`
)

type infoRequestData struct {
        request *http.Request
        gameId string
        version uint8
        game sys.Game
}

func getInfoRequestData(r *http.Request, isForInitialInfo bool) (*infoRequestData, error) <span class="cov8" title="1">{
        ird := &amp;infoRequestData{
                request: r,
        }
        reqJson := json{}
        readJson(r, &amp;reqJson)
        if gameIdParam, exists := reqJson[_GAME_ID]; exists </span><span class="cov8" title="1">{
                if gameId, ok := gameIdParam.(string); ok </span><span class="cov8" title="1">{
                        ird.gameId = gameId
                        if !isForInitialInfo </span><span class="cov8" title="1">{
                                if versionParam, exists := reqJson[_VERSION]; exists </span><span class="cov8" title="1">{
                                        if version, ok := versionParam.(float64); ok </span><span class="cov8" title="1">{
                                                ird.version = uint8(version)
                                        }</span><span class="cov8" title="1"> else {
                                                return nil, errors.New(`version must be a number value`)
                                        }</span>
                                }<span class="cov8" title="1"> else {
                                        return nil, errors.New(`version value must be included in request`)
                                }</span>
                        }
                        <span class="cov8" title="1">if g, err := gameStore.Read(ird.request, ird.gameId); err == nil </span><span class="cov8" title="1">{
                                ird.game = g
                                oldVersion := g.GetVersion()
                                ird.game.Kick()
                                if oldVersion != ird.game.GetVersion() </span><span class="cov8" title="1">{
                                        if err := gameStore.Update(r, ird.gameId, ird.game); err != nil </span><span class="cov8" title="1">{
                                                return nil, err
                                        }</span>
                                }
                        }<span class="cov8" title="1"> else {
                                return nil, err
                        }</span>
                }<span class="cov8" title="1"> else {
                        return nil, errors.New(`gameId must be a string value`)
                }</span>
        }<span class="cov8" title="1"> else {
                return nil, errors.New(`gameId value must be included in request`)
        }</span>
        <span class="cov8" title="1">return ird, nil</span>
}

type takeTurnData struct {
        row uint8
        col uint8
}

func getTakeTurnData(r *http.Request) (*takeTurnData, error) <span class="cov8" title="1">{
        ttd := &amp;takeTurnData{}
        reqJson := json{}
        readJson(r, &amp;reqJson)
        if rowParam, exists := reqJson[_ROW]; exists </span><span class="cov8" title="1">{
                if row, ok := rowParam.(float64); ok </span><span class="cov8" title="1">{
                        ttd.row = uint8(row)
                }</span><span class="cov8" title="1"> else {
                        return nil, errors.New(`row must be a number value`)
                }</span>
        }<span class="cov8" title="1"> else {
                return nil, errors.New(`row value must be included in request`)
        }</span>
        <span class="cov8" title="1">if colParam, exists := reqJson[_COL]; exists </span><span class="cov8" title="1">{
                if col, ok := colParam.(float64); ok </span><span class="cov8" title="1">{
                        ttd.col = uint8(col)
                }</span><span class="cov8" title="1"> else {
                        return nil, errors.New(`col must be a number value`)
                }</span>
        }<span class="cov8" title="1"> else {
                return nil, errors.New(`col value must be included in request`)
        }</span>
        <span class="cov8" title="1">return ttd, nil</span>
}

func updateSession(s sys.Session, g sys.Game)<span class="cov8" title="1">{
        pId := s.GetPlayerId()
        if pId != `` &amp;&amp; (pId == g.GetPlayer1() || pId == g.GetPlayer2()) </span><span class="cov8" title="1">{
                if g.IsFinished() </span><span class="cov8" title="1">{
                        s.Clear()
                }</span><span class="cov8" title="1"> else {
                        s.Set(pId, s.GetGameId(), g)
                }</span>
        }
}

func writeStandardJsonResponse(w http.ResponseWriter, g sys.Game)<span class="cov8" title="1">{
        writeJson(w, &amp;json{
                `turnToken`: g.GetTurnPlayersToken(),
                `version`: g.GetVersion(),
                `board`: g.GetBoard(),
                `turnStart`: g.GetTurnStart(),
        })
}</span>

type json map[string]interface{}

func writeJson(w http.ResponseWriter, obj interface{}) error<span class="cov8" title="1">{
        js, err := js.Marshal(obj)
        w.Header().Set(`Content-Type`, `application/json`)
        w.Write(js)
        return err
}</span>


func readJson(r *http.Request, obj interface{}) error<span class="cov8" title="1">{
        decoder := js.NewDecoder(r.Body)
        err := decoder.Decode(obj)
        return err
}</span>

func writeError(w http.ResponseWriter, msg string)<span class="cov8" title="1">{
        http.Error(w, msg, 500)
}</span>
</pre>
		
		<pre class="file" id="file1" style="display: none">package api

import(
        `net/http`
        `github.com/0xor1/gameseed/src/server/src/sys`
        `github.com/0xor1/gameseed/src/server/lib/mux`
)

const (
        _API                                = `/api`
        _PLAY                                = `/play`
        _GET_INITIAL_INFO        = `/getInitialInfo`
        _GET_INFO                        = `/getInfo`
        _TAKE_TURN                        = `/takeTurn`
)

var (
        sessionStore        sys.SessionStore
        gameStore                sys.GameStore
)

func Route(router *mux.Router, gs sys.GameStore, ss sys.SessionStore)<span class="cov8" title="1">{
        gameStore = gs
        sessionStore = ss
        subrouter := router.PathPrefix(_API).Subrouter()
        subrouter.Path(_PLAY).HandlerFunc(play)
        subrouter.Path(_GET_INITIAL_INFO).HandlerFunc(getInitialInfo)
        subrouter.Path(_GET_INFO).HandlerFunc(getInfo)
        subrouter.Path(_TAKE_TURN).HandlerFunc(takeTurn)
}</span>

func play(w http.ResponseWriter, r *http.Request)<span class="cov8" title="1">{
        s, _ := sessionStore.Get(w, r)

        if !s.IsEngagedInOngoingGame() </span><span class="cov8" title="1">{
                gId, g, err := gameStore.Create(r)
                if err != nil </span><span class="cov8" title="1">{
                        writeError(w, `failed to create new game`)
                        return
                }</span>
                <span class="cov8" title="1">s.Set(g.GetPlayer1(), gId, g)</span>
        }
        <span class="cov8" title="1">writeJson(w, &amp;json{`gameId`: s.GetGameId()})</span>
}

func getInitialInfo(w http.ResponseWriter, r *http.Request) <span class="cov8" title="1">{
        if ird, err := getInfoRequestData(r, true); err == nil </span><span class="cov8" title="1">{
                s, _ := sessionStore.Get(w, r)
                if !s.IsEngagedInOngoingGame() </span><span class="cov8" title="1">{
                        if err = ird.game.RegisterPlayer2(); err == nil </span><span class="cov8" title="1">{
                                if err := gameStore.Update(r, ird.gameId, ird.game); err == nil </span><span class="cov8" title="1">{
                                        //game was update successfully this user is player 2
                                        s.Set(ird.game.GetPlayer2(), ird.gameId, ird.game)
                                }</span>
                        }
                }
                <span class="cov8" title="1">writeJson(w, &amp;json{
                        `myToken`: ird.game.GetPlayersToken(s.GetPlayerId()),
                        `turnStart`: ird.game.GetTurnStart(),
                        `version`: ird.game.GetVersion(),
                        `board`: ird.game.GetBoard(),
                        `turnLength`: ird.game.GetTurnLength(),
                })</span>
        }<span class="cov8" title="1"> else {
                writeError(w, err.Error())
        }</span>
}

func getInfo(w http.ResponseWriter, r *http.Request) <span class="cov8" title="1">{
        if ird, err := getInfoRequestData(r, false); err == nil </span><span class="cov8" title="1">{
                if ird.version == ird.game.GetVersion() </span><span class="cov8" title="1">{
                        writeJson(w, &amp;json{`noChange`: true})
                }</span><span class="cov8" title="1"> else {
                        s, _ := sessionStore.Get(w, r)
                        writeStandardJsonResponse(w, ird.game)
                        updateSession(s, ird.game)
                }</span>
        }<span class="cov8" title="1"> else {
                writeError(w, err.Error())
        }</span>
}

func takeTurn(w http.ResponseWriter, r *http.Request) <span class="cov8" title="1">{
        if ttd, err := getTakeTurnData(r); err == nil </span><span class="cov8" title="1">{
                s, _ := sessionStore.Get(w, r)
                if sGame := s.GetGame(); sGame != nil </span><span class="cov8" title="1">{
                        if err := sGame.TakeTurn(s.GetPlayerId(), ttd.row, ttd.col); err == nil </span><span class="cov8" title="1">{
                                if game, err := gameStore.Read(r, s.GetGameId()); err == nil </span><span class="cov8" title="1">{
                                        if err := game.TakeTurn(s.GetPlayerId(), ttd.row, ttd.col); err == nil </span><span class="cov8" title="1">{
                                                if err := gameStore.Update(r, s.GetGameId(), game); err == nil </span><span class="cov8" title="1">{
                                                        writeStandardJsonResponse(w, game)
                                                        updateSession(s, game)
                                                }</span><span class="cov8" title="1"> else {
                                                        writeError(w, err.Error())
                                                }</span>
                                        }<span class="cov8" title="1"> else {
                                                writeError(w, err.Error())
                                        }</span>
                                }<span class="cov8" title="1"> else {
                                        writeError(w, err.Error())
                                }</span>
                        }<span class="cov8" title="1"> else {
                                writeError(w, err.Error())
                        }</span>
                }<span class="cov8" title="1"> else {
                        writeError(w, `session has no game`)
                }</span>
        }<span class="cov8" title="1"> else {
                writeError(w, err.Error())
        }</span>
}</pre>
		
		<pre class="file" id="file2" style="display: none">package game

import(
        `fmt`
        `time`
        `errors`
        `strconv`
        `github.com/0xor1/gameseed/src/server/src/sys`
)

const(
        _X                                                         = `X`
        _O                                                         = `O`
        _TURN_LENGTH                                 = 5
        _TURN_LENGTH_ERROR_MARGIN        = 0.5
        _TURN_LENGTH_UNIT                        = `s`
        _TURN_SPACING                                = `1s`
        _START_TIME_BUF                                = `6s`
)

func New() sys.Game <span class="cov8" title="1">{
        player1Id := sys.Id()
        return &amp;game{
                Player1Id: player1Id,
                TurnPlayer: player1Id,
        }
}</span>

type game struct {
        Player1Id         string
        Player2Id         string
        TurnPlayer        string
        TurnStart         time.Time
        Board                 [3][3]string
        Version         uint8
}

func (g *game) GetPlayer1() string <span class="cov8" title="1">{
        return g.Player1Id
}</span>

func (g *game) GetPlayer2() string <span class="cov8" title="1">{
        return g.Player2Id
}</span>

func (g *game) GetTurnStart() time.Time <span class="cov8" title="1">{
        return g.TurnStart
}</span>

func (g *game) GetTurnLength() uint8 <span class="cov8" title="1">{
        return _TURN_LENGTH
}</span>

func (g *game) GetBoard() [3][3]string <span class="cov8" title="1">{
        return g.Board
}</span>

func (g *game) GetVersion() uint8 <span class="cov8" title="1">{
        return g.Version
}</span>

func (g *game) GetPlayersToken(playerId string) string <span class="cov8" title="1">{
        if playerId == g.Player1Id </span><span class="cov8" title="1">{
                return _X
        }</span><span class="cov8" title="1"> else if playerId == g.Player2Id </span><span class="cov8" title="1">{
                return _O
        }</span>
        <span class="cov8" title="1">return ``</span>
}

func (g *game) GetTokensPlayer(token string) string <span class="cov8" title="1">{
        if token == _X </span><span class="cov8" title="1">{
                return g.Player1Id
        }</span><span class="cov8" title="1"> else if token == _O </span><span class="cov8" title="1">{
                return g.Player2Id
        }</span>
        <span class="cov8" title="1">return ``</span>
}

func (g *game) GetTurnPlayersToken() string <span class="cov8" title="1">{
        return g.GetPlayersToken(g.TurnPlayer)
}</span>

func (g *game) RegisterPlayer2() error <span class="cov8" title="1">{
        if g.Player2Id != `` </span><span class="cov8" title="1">{
                return errors.New(`game already has a player2`)
        }</span>
        <span class="cov8" title="1">g.Version++
        g.Player2Id = sys.Id()
        dur, _ := time.ParseDuration(_START_TIME_BUF)
        g.TurnStart = sys.Time().Add(dur)
        return nil</span>
}

func (g *game) Kick()<span class="cov8" title="1">{
        if !g.TurnStart.IsZero() </span><span class="cov8" title="1">{
                now := sys.Time()
                if g.getTurnEnd().Before(now) </span><span class="cov8" title="1">{
                        g.updateFundamentals()
                }</span>
        }
}

func (g *game) TakeTurn(playerId string, row, col uint8) error <span class="cov8" title="1">{
        var err error
        if g.TurnPlayer == playerId </span><span class="cov8" title="1">{
                if !g.TurnStart.IsZero() </span><span class="cov8" title="1">{
                        now := sys.Time()
                        if (g.GetTurnStart().Before(now) || g.GetTurnStart().Equal(now)) &amp;&amp; g.getTurnEnd().After(now) </span><span class="cov8" title="1">{
                                if row &lt; 3 &amp;&amp; col &lt; 3 </span><span class="cov8" title="1">{
                                        if g.Board[row][col] == `` </span><span class="cov8" title="1">{
                                                token := g.GetPlayersToken(playerId)
                                                g.Board[row][col] = token
                                                if g.IsFinished() </span><span class="cov8" title="1">{
                                                        g.Version++
                                                        g.TurnStart = time.Time{}
                                                        g.TurnPlayer = ``
                                                }</span><span class="cov8" title="1"> else {
                                                        g.updateFundamentals()
                                                }</span>
                                        }<span class="cov8" title="1"> else {
                                                err = errors.New(fmt.Sprintf(`row:%d col:%d is already occupied`, row, col))
                                        }</span>
                                }<span class="cov8" title="1"> else {
                                        err = errors.New(`row and col params must be &lt; 3`)
                                }</span>
                        }<span class="cov8" title="1"> else {
                                err = errors.New(`not within turn time bounds`)
                        }</span>
                }<span class="cov8" title="1"> else {
                        err = errors.New(`game is not active`)
                }</span>
        }<span class="cov8" title="1"> else {
                err = errors.New(`not player's turn`)
        }</span>
        <span class="cov8" title="1">return err</span>
}

func (g *game) IsFinished() bool <span class="cov8" title="1">{
        return g.IsWon() || g.isFull()
}</span>

func (g *game) IsWon() bool <span class="cov8" title="1">{
        return g.getWinningRowIndex() &gt; -1 || g.getWinningColIndex() &gt; -1 || g.hasDiagWin()
}</span>

func (g *game) getWinningRowIndex() int <span class="cov8" title="1">{
        for row := 0; row &lt; 3; row++ </span><span class="cov8" title="1">{
                if val := g.Board[row][0]; val != `` &amp;&amp; g.Board[row][1] == val &amp;&amp; g.Board[row][2] == val</span><span class="cov8" title="1">{
                        return row
                }</span>
        }
        <span class="cov8" title="1">return -1</span>
}

func (g *game) getWinningColIndex() int <span class="cov8" title="1">{
        for col := 0; col &lt; 3; col++ </span><span class="cov8" title="1">{
                if val := g.Board[0][col]; val != `` &amp;&amp; g.Board[1][col] == val &amp;&amp; g.Board[2][col] == val</span><span class="cov8" title="1">{
                        return col
                }</span>
        }
        <span class="cov8" title="1">return -1</span>
}

func (g *game) hasDiagWin() bool <span class="cov8" title="1">{
        val := g.Board[1][1]
        if val != `` </span><span class="cov8" title="1">{
                return (g.Board[0][0] == val &amp;&amp; g.Board[2][2] == val) || (g.Board[0][2] == val &amp;&amp; g.Board[2][0] == val)
        }</span>
        <span class="cov8" title="1">return false</span>
}

func (g *game) isFull() bool <span class="cov8" title="1">{
        for row := range g.Board </span><span class="cov8" title="1">{
                for col := range g.Board[row] </span><span class="cov8" title="1">{
                        if g.Board[row][col] == `` </span><span class="cov8" title="1">{
                                return false
                        }</span>
                }
        }
        <span class="cov8" title="1">return true</span>
}

func (g *game) IsDrawn() bool <span class="cov8" title="1">{
        return !g.IsWon() &amp;&amp; g.isFull()
}</span>

func (g *game) GetWinner() string <span class="cov8" title="1">{
        if row := g.getWinningRowIndex(); row &gt; -1 </span><span class="cov8" title="1">{
                return g.GetTokensPlayer(g.Board[row][0])
        }</span><span class="cov8" title="1"> else if col := g.getWinningColIndex(); col &gt; -1 </span><span class="cov8" title="1">{
                return g.GetTokensPlayer(g.Board[0][col])
        }</span><span class="cov8" title="1"> else if g.hasDiagWin() </span><span class="cov8" title="1">{
                return g.GetTokensPlayer(g.Board[1][1])
        }</span>
        <span class="cov8" title="1">return ``</span>
}

func (g *game) getTurnEnd() time.Time <span class="cov8" title="1">{
        dur, _ := time.ParseDuration(strconv.FormatFloat(_TURN_LENGTH + _TURN_LENGTH_ERROR_MARGIN, 'f', 1, 32)+ `s`)
        return g.TurnStart.Add(dur)
}</span>

func (g *game) updateFundamentals()<span class="cov8" title="1">{
        g.Version++
        if g.TurnPlayer == g.Player1Id </span><span class="cov8" title="1">{
                g.TurnPlayer = g.Player2Id
        }</span><span class="cov8" title="1"> else {
                g.TurnPlayer = g.Player1Id
        }</span>
        <span class="cov8" title="1">dur, _ := time.ParseDuration(_TURN_SPACING)
        g.TurnStart = sys.Time().Add(dur)</span>
}</pre>
		
		<pre class="file" id="file3" style="display: none">package session

import (
        `net/http`
        `encoding/gob`
        `github.com/0xor1/gameseed/src/server/src/sys`
        `github.com/0xor1/gameseed/src/server/lib/sessions`
)

const (
        _GAME_SESSION                 = `gameSession`
        _GAME_ID                         = `gameId`
        _PLAYER_ID                        = `playerId`
        _GAME                                = `game`
)

type sessionStore struct{
        inner sessions.Store
}

type session struct {
        writer http.ResponseWriter
        request *http.Request
        internalSession *sessions.Session
        playerId string
        gameId string
        game sys.Game
}


func GetStore(game sys.Game, authKey string, crypKey string, httpOnly bool, cookieMaxAge int) sys.SessionStore<span class="cov8" title="1">{
        gob.Register(game)
        ss := sessions.NewCookieStore([]byte(authKey), []byte(crypKey))
        ss.Options.HttpOnly = httpOnly
        ss.Options.MaxAge = cookieMaxAge
        return &amp;sessionStore{
                inner: ss,
        }
}</span>

func (ss *sessionStore) Get(w http.ResponseWriter, r *http.Request) (sys.Session, error) <span class="cov8" title="1">{
        s, err := ss.inner.Get(r, _GAME_SESSION)

        session := &amp;session{
                writer: w,
                request: r,
                internalSession: s,
        }

        var val interface{}
        var exists bool

        if val, exists = s.Values[_PLAYER_ID]; exists </span><span class="cov8" title="1">{
                session.playerId = val.(string)
        }</span><span class="cov8" title="1">else{
                session.playerId = ``
        }</span>

        <span class="cov8" title="1">if val, exists = s.Values[_GAME_ID]; exists </span><span class="cov8" title="1">{
                session.gameId = val.(string)
        }</span><span class="cov8" title="1">else{
                session.gameId = ``
        }</span>

        <span class="cov8" title="1">if val, exists = s.Values[_GAME]; exists &amp;&amp; val != nil </span><span class="cov8" title="1">{
                session.game = val.(sys.Game)
        }</span><span class="cov8" title="1">else{
                session.game = nil
        }</span>

        <span class="cov8" title="1">return session, err</span>
}

func (s *session) Set(playerId string, gameId string, g sys.Game) error <span class="cov8" title="1">{
        s.playerId = playerId
        s.gameId = gameId
        s.game = g
        s.internalSession.Values = map[interface{}]interface{}{
                _PLAYER_ID: playerId,
                _GAME_ID: gameId,
                _GAME: g,
        }
        return sessions.Save(s.request, s.writer)
}</span>

func (s *session) Clear() error <span class="cov8" title="1">{
        s.playerId = ``
        s.gameId = ``
        s.game = nil
        s.internalSession.Values = map[interface{}]interface{}{}
        return sessions.Save(s.request, s.writer)
}</span>

func (s *session) IsEngagedInOngoingGame() bool <span class="cov8" title="1">{
        return s.game != nil &amp;&amp; !s.game.IsFinished()
}</span>

func (s *session) GetPlayerId() string <span class="cov8" title="1">{
        return s.playerId
}</span>

func (s *session) GetGameId() string <span class="cov8" title="1">{
        return s.gameId
}</span>

func (s *session) GetGame() sys.Game <span class="cov8" title="1">{
        return s.game
}</pre>
		
		<pre class="file" id="file4" style="display: none">package sys

import (
        `time`
        `net/http`
        `github.com/0xor1/gameseed/src/server/lib/bson`
)

type SessionStore interface {
        Get(http.ResponseWriter, *http.Request) (Session, error)
}

type Session interface {
        Set(playerId string, gameId string, g Game) error
        Clear()                                                                         error
        IsEngagedInOngoingGame()                                         bool
        GetPlayerId()                                                                 string
        GetGameId()                                                                 string
        GetGame()                                                                         Game
}

type GameStore interface{
        Create(*http.Request)                                                         (gameId string, g Game, err error)
        Read(r *http.Request, gameId string)                         (Game, error)
        Update(r *http.Request, gameId string, g Game)         error
}

type Game interface {
        GetPlayer1()                                                                 (player1Id string)
        GetPlayer2()                                                                 (player2Id string)
        GetTurnStart()                                                                 (turnStart time.Time)
        GetTurnLength()                                                         (turnLength uint8)
        GetBoard()                                                                         (board [3][3]string)
        GetVersion()                                                                (version uint8)
        GetPlayersToken(playerId string)                        (token string)
        GetTurnPlayersToken()                                                (token string)
        GetTokensPlayer(token string)                                (playerId string)
        RegisterPlayer2()                                                         error
        TakeTurn(playerId string, row, col uint8)        error
        IsFinished()                                                                 bool
        IsWon()                                                                                 bool
        IsDrawn()                                                                        bool
        GetWinner()                                                                 (playerId string)
        Kick()
}

func Time() time.Time<span class="cov8" title="1">{
        return time.Now().UTC()
}</span>

func Id() string<span class="cov8" title="1">{
        return bson.NewObjectId().Hex()
}</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible = document.getElementById('file0');
		files.addEventListener('change', onChange, false);
		function onChange() {
			visible.style.display = 'none';
			visible = document.getElementById(files.value);
			visible.style.display = 'block';
			window.scrollTo(0, 0);
		}
	})();
	</script>
</html>
